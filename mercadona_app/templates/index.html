{% extends "base_generic.html" %}

{% block content %}
    <div class="container-fluid">
        <h1 class="display-4">Accueil</h1>
        <p>Bienvenue sur le site de catalogue de Mercadona</p>
        <div>
        <form action="" method="get" >
            <label for="category" class="form-label">Veuillez selectionner une catégorie : </label>
            <select name="category" id="category" class="form-control">
                <option value="">Toutes les catégories</option>
                {% for category in categories %}
                <option value="{{category.name}}" {% if category.name == selected_category %} selected {% endif %}>{{category.name}}</option>
                {% endfor %}
            </select>
            <input type="submit" value="Filtrer" class="btn btn-primary mt-2 mb-2">
        </form>
    </div>
    <div >
        {% for product in product_list %}
<div class="card" style="width: 18rem;">
    <img class="card-img-top" src="{{product.image.url}}" alt="Card image cap">
    <div class="card-body">
      <h5 class="card-title">{{product.label}}</h5>
      <p class="card-text">{{product.description}}</p>
    </div>
    <ul class="list-group list-group-flush">
      <li class="list-group-item">{{product.price}} €</li>
      {% for promotion in promotion_list %}
      {% if product.label == promotion.product.label and promotion.change_status == True %}
        <li class="list-group-item">nouveau prix : <span class="promotion">{{promotion.calculate_discounted_price}} €</span></li>
        {% endif %}
        {% endfor %}
        
      
    </ul>
    
  </div>
  {% endfor %}
    </div>
    <div>
        <nav aria-label="Page navigation ">
        <ul class="pagination">
            {% if product_list.has_previous %}
           
            <li class="page-item"><a href="?page={{product_list.previous_page_number}}" class="page-link">page précédente</a></li>
            {% endif %}
            <li class="page-item active">
            <span class="current-page page-link"> {{product_list.number}}  </span></li>
            {% if product_list.has_next %}
            <li class="page-item">
            <a href="?page={{product_list.next_page_number}}" class="page-link">page suivante</a></li>
            
            {% endif %}
        </ul>
    </nav>
</div>
</div>
{% endblock %}
       

    
